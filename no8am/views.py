from flask import render_template, request, jsonify, redirect, url_for, session
import requests
import sys
import httplib
from functools import wraps
import json

from no8am import app, store_link, get_link, generate_short_link, Department, CreditOrCCC, \
	find_course_in_department, fetch_section_details, get_user_format_semester, generate_metadata, \
	CCC_LIST, CREDIT_LIST, DEPARTMENT_LIST, APPLICATION_ROOT, STATIC_LOCATION, SIMPLE_FORM_TOKEN

reload(sys)
sys.setdefaultencoding('utf-8')


def handle_response_errors(api_arguments):
	"""
	Decorator to return the correct HTTP errors in API responses.
	"""

	def handle_response_errors_decorator(api_function):

		@wraps(api_function)
		def wrapper():
			# find arguments missing from API call
			missing_arguments = set(api_arguments) - set(request.args.keys())

			try:
				# find missing arguments
				if len(missing_arguments) > 0:
					raise RuntimeError("Missing the following arguments: " + str(list(missing_arguments)))

				# retrieve argument values and pass them to the API function
				return api_function(*map(request.args.get, api_arguments))

			except RuntimeError as error:
				# let the user know about a malformed API call
				return jsonify(error=error.message), httplib.BAD_REQUEST

			except Exception:
				return '', httplib.BAD_REQUEST

		return wrapper

	return handle_response_errors_decorator


@app.route('/')
def index():
	return render_template('index.html', APP_ROOT=APPLICATION_ROOT)


@app.route('/bucknell/')
@app.route('/bucknell/<config>')
def bucknell(config=None):
	if config:
		# Verify that custom link is valid
		response = get_link(config)
		if "Item" in response.keys():
			# store course data in cookie and redirect to /bucknell/
			session['saved_schedule'] = response["Item"]["schedule"]["S"]
		return redirect(url_for('bucknell'))
	else:
		metadata = generate_metadata() if STATIC_LOCATION == 'local' else None
		return render_template(
			'start.html', CURRENT_SEMESTER=get_user_format_semester(), APP_ROOT=APPLICATION_ROOT, metadata=metadata
		)


@app.route('/course')
@app.route('/course/<department>')
@app.route('/course/<department>/<course_number>')
def course_lookup(department=None, course_number=None):

	# return jsonify(cache_time=None, sections=[{"CCC": "Desc","CRN": "10001","course": "105","courseName": "Introduction to Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 105","departmentAndCourse": "CHEM 105","departmentAndCourseAndSection": "CHEM 105 01","freeSeats": "5","main": True,"message": None,"prm": "FRST NMLG NSMC ","professor": "Flynn, Conor J.","resSeats": "","roomMet": "RCHM 101","sectionNum": "01","timesMet": "MWF 10:00-10:52am","waitList": "1"},{"CCC": "Desc","CRN": "10002","course": "105L","courseName": "Lab for Intro to Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 105","departmentAndCourse": "CHEM 105L","departmentAndCourseAndSection": "CHEM 105L 60","dependent_main_sections": ["01"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Flynn, Conor J.","resSeats": "","roomMet": "RCHM 226, RCHM 226","sectionNum": "60","timesMet": "T 8:00-8:52amT 9:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "10003","course": "105L","courseName": "Lab for Intro to Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 105","departmentAndCourse": "CHEM 105L","departmentAndCourseAndSection": "CHEM 105L 61","dependent_main_sections": ["01"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Flynn, Conor J.","resSeats": "","roomMet": "RCHM 226, RCHM 226","sectionNum": "61","timesMet": "T 2:00-2:52pmT 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10004","course": "201","courseName": "General Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201","departmentAndCourseAndSection": "CHEM 201 01","freeSeats": "29","main": True,"message": "Section CHEM 201 01: College of Arts & Sciences students should only take this course if they have already taken CHEM 211 and CHEM 212.Students must select a lab and either recitation 40 or 41 with CHEM 201-01\r","prm": "LBSC NMLG NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 116","sectionNum": "01","timesMet": "MWF 8:00-8:52am","waitList": ""},{"CCC": "Desc","CRN": "10660","course": "201","courseName": "General Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201","departmentAndCourseAndSection": "CHEM 201 02","freeSeats": "19","main": True,"message": "Section CHEM 201 02: College of Arts & Sciences students should only take this course if they have already taken CHEM 211 and CHEM 212.Students must select a lab and either recitation 42 or 43 with CHEM 201-02\r\r","prm": "LBSC NMLG NSMC ","professor": "Thomas, Courtney L.","resSeats": "","roomMet": "RCHM 116","sectionNum": "02","timesMet": "MWF 9:00-9:52am","waitList": ""},{"CCC": "Desc","CRN": "16842","course": "201","courseName": "General Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201","departmentAndCourseAndSection": "CHEM 201 03","freeSeats": "14","main": True,"message": "Section CHEM 201 03: College of Arts & Sciences students should only take this course if they have already taken CHEM 211 and CHEM 212.Students must select a lab and either recitation 44 or 45 with CHEM 201-03\r","prm": "LBSC NMLG NSMC ","professor": "Jimenez, Zulma A.","resSeats": "","roomMet": "RCHM 116","sectionNum": "03","timesMet": "TR 2:30-3:52pm","waitList": ""},{"CCC": "Desc","CRN": "10034","course": "201R","courseName": "Recitation for CHEM 201 01","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 40","dependent_main_sections": ["01"],"freeSeats": "25","main": False,"message": None,"prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 101","sectionNum": "40","timesMet": "M 1:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "10035","course": "201R","courseName": "Recitation for CHEM 201 01","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 41","dependent_main_sections": ["01"],"freeSeats": "13","main": False,"message": None,"prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 101","sectionNum": "41","timesMet": "T 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10036","course": "201R","courseName": "Recitation for CHEM 201 02","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 42","dependent_main_sections": ["02"],"freeSeats": "8","main": False,"message": None,"prm": "NSMC ","professor": "Thomas, Courtney L.","resSeats": "","roomMet": "OLIN 255","sectionNum": "42","timesMet": "T 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10037","course": "201R","courseName": "Recitation for CHEM 201 02","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 43","dependent_main_sections": ["02"],"freeSeats": "21","main": False,"message": None,"prm": "NSMC ","professor": "Thomas, Courtney L.","resSeats": "","roomMet": "RCHM 101","sectionNum": "43","timesMet": "T 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "16844","course": "201R","courseName": "Recitation for CHEM 201-03","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 44","dependent_main_sections": ["03"],"freeSeats": "23","main": False,"message": None,"prm": "NSMC ","professor": "Jimenez, Zulma A.","resSeats": "","roomMet": "RCHM 102","sectionNum": "44","timesMet": "W 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "16845","course": "201R","courseName": "Recitation for CHEM 201-03","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201R","departmentAndCourseAndSection": "CHEM 201R 45","dependent_main_sections": ["03"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Jimenez, Zulma A.","resSeats": "","roomMet": "RCHM 101","sectionNum": "45","timesMet": "R 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10659","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 60","dependent_main_sections": ["01","02","03"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Thomas, Courtney L.; Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "60","timesMet": "M 2:00-2:52pmM 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10005","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 61","dependent_main_sections": ["01","02","03"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "61","timesMet": "T 8:00-8:52amT 9:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "10006","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 62","dependent_main_sections": ["01","02","03"],"freeSeats": "3","main": False,"message": None,"prm": "NSMC ","professor": "Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "62","timesMet": "T 2:00-2:52pmT 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "17488","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 63","dependent_main_sections": ["01","02","03"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Thomas, Courtney L.; Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "63","timesMet": "W 2:00-2:52pmW 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10008","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 64","dependent_main_sections": ["01","02","03"],"freeSeats": "6","main": False,"message": None,"prm": "NSMC ","professor": "Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "64","timesMet": "R 8:00-8:52amR 9:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "10007","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 65","dependent_main_sections": ["01","02","03"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "65","timesMet": "R 2:00-2:52pmR 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19150","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 66","dependent_main_sections": ["01","02","03"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Jimenez, Zulma A.; Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "BIOL 102, RCHM 110","sectionNum": "66","timesMet": "F 11:00-11:52amF 12:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "10009","course": "201L","courseName": "Lab for General Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 201","departmentAndCourse": "CHEM 201L","departmentAndCourseAndSection": "CHEM 201L 67","dependent_main_sections": ["01","02","03"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Thomas, Courtney L.; Perera, Maluge Neluni (Neluni) A.","resSeats": "","roomMet": "RCHM 102, RCHM 110","sectionNum": "67","timesMet": "F 2:00-2:52pmF 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19523","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 01","freeSeats": "3","main": True,"message": "Section CHEM 205 01: Students must select a lab and recitation 40 with CHEM 205-01.","prm": "FRST LBSC NSMC ","professor": "McGuire, Molly M.","resSeats": "","roomMet": "RCHM 102","sectionNum": "01","timesMet": "MWF 8:00-8:52am","waitList": "1"},{"CCC": "Desc","CRN": "19524","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 02","freeSeats": "Closed","main": True,"message": "Section CHEM 205 02: Students must select a lab and recitation 41 with CHEM 205-02.","prm": "FRST LBSC NSMC ","professor": "Casteel, Dee A.","resSeats": "","roomMet": "RCHM 101","sectionNum": "02","timesMet": "MWF 8:00-8:52am","waitList": "Closed"},{"CCC": "Desc","CRN": "19525","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 03","freeSeats": "1","main": True,"message": "Section CHEM 205 03: Students must select a lab and recitation 42 with CHEM 205-03.","prm": "FRST LBSC NSMC ","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "RCHM 101","sectionNum": "03","timesMet": "MWF 9:00-9:52am","waitList": "1"},{"CCC": "Desc","CRN": "19526","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 04","freeSeats": "1","main": True,"message": "Section CHEM 205 04: Students must select a lab and recitation 43 with CHEM 205-04.","prm": "FRST LBSC NSMC ","professor": "Krout, Michael R.","resSeats": "","roomMet": "RCHM 102","sectionNum": "04","timesMet": "MWF 10:00-10:52am","waitList": "1"},{"CCC": "Desc","CRN": "19527","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 05","freeSeats": "1","main": True,"message": "Section CHEM 205 05: Students must select a lab and recitation 44 with CHEM 205-05.","prm": "FRST LBSC NSMC ","professor": "Arslan, Hasan","resSeats": "","roomMet": "RCHM 101","sectionNum": "05","timesMet": "MWF 11:00-11:52am","waitList": "Closed"},{"CCC": "Desc","CRN": "19528","course": "205","courseName": "Principles of Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205","departmentAndCourseAndSection": "CHEM 205 06","freeSeats": "2","main": True,"message": "Section CHEM 205 06: Students must select a lab and recitation 45 with CHEM 205-06.","prm": "FRST LBSC NSMC ","professor": "Stockland, Robert A.","resSeats": "","roomMet": "RCHM 102","sectionNum": "06","timesMet": "MWF 1:00-1:52pm","waitList": "2"},{"CCC": "Desc","CRN": "19586","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 40","dependent_main_sections": ["01"],"freeSeats": "3","main": False,"message": None,"prm": "NSMC ","professor": "McGuire, Molly M.","resSeats": "","roomMet": "RCHM 101","sectionNum": "40","timesMet": "W 5:00-6:22pm","waitList": ""},{"CCC": "Desc","CRN": "19587","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 41","dependent_main_sections": ["02"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Casteel, Dee A.","resSeats": "","roomMet": "RCHM 101","sectionNum": "41","timesMet": "W 3:30-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19588","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 42","dependent_main_sections": ["03"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "BIOL 102","sectionNum": "42","timesMet": "W 3:30-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19589","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 43","dependent_main_sections": ["04"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Krout, Michael R.","resSeats": "","roomMet": "RCHM 102","sectionNum": "43","timesMet": "W 5:00-6:22pm","waitList": ""},{"CCC": "Desc","CRN": "19590","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 44","dependent_main_sections": ["05"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Arslan, Hasan","resSeats": "","roomMet": "BIOL 102","sectionNum": "44","timesMet": "W 5:00-6:22pm","waitList": ""},{"CCC": "Desc","CRN": "19591","course": "205R","courseName": "Recitation for CHEM 205","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205R","departmentAndCourseAndSection": "CHEM 205R 45","dependent_main_sections": ["06"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Stockland, Robert A.","resSeats": "","roomMet": "RCHM 102","sectionNum": "45","timesMet": "W 3:30-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19529","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 60","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 102, RCHM 107","sectionNum": "60","timesMet": "M 11:00-11:52amM 12:00-1:52pm","waitList": "Closed"},{"CCC": "Desc","CRN": "19530","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 61","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "McGuire, Molly M.; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "61","timesMet": "M 2:00-2:52pmM 3:00-4:52pm","waitList": "Closed"},{"CCC": "Desc","CRN": "19531","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 62","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Krout, Michael R.; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "62","timesMet": "T 8:00-8:52amT 9:00-10:52am","waitList": "Closed"},{"CCC": "Desc","CRN": "19532","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 63","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Martino, Patrick (Pat) F.","resSeats": "","roomMet": "BIOL 101, RCHM 107","sectionNum": "63","timesMet": "T 11:00-11:52amT 12:00-1:52pm","waitList": "1"},{"CCC": "Desc","CRN": "19533","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 64","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Stockland, Robert A.; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "64","timesMet": "T 2:00-2:52pmT 3:00-4:52pm","waitList": "Closed"},{"CCC": "Desc","CRN": "19534","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 65","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Arslan, Hasan; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "65","timesMet": "R 8:00-8:52amR 9:00-10:52am","waitList": "Closed"},{"CCC": "Desc","CRN": "19535","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 66","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "66","timesMet": "R 11:00-11:52amR 12:00-1:52pm","waitList": "2"},{"CCC": "Desc","CRN": "19542","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 67","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Stockland, Robert A.; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "67","timesMet": "R 2:00-2:52pmR 3:00-4:52pm","waitList": "Closed"},{"CCC": "Desc","CRN": "19543","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 68","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 102, RCHM 107","sectionNum": "68","timesMet": "F 11:00-11:52amF 12:00-1:52pm","waitList": "1"},{"CCC": "Desc","CRN": "19544","course": "205L","courseName": "Lab for Principles of CHEM","department": "CHEM","departmentAndBareCourse": "CHEM 205","departmentAndCourse": "CHEM 205L","departmentAndCourseAndSection": "CHEM 205L 69","dependent_main_sections": ["01","02","03","04","05","06"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.; Martino, Patrick (Pat) F.","resSeats": "","roomMet": "RCHM 101, RCHM 107","sectionNum": "69","timesMet": "F 2:00-2:52pmF 3:00-4:52pm","waitList": "1"},{"CCC": "Desc","CRN": "19695","course": "221","courseName": "Inorganic Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221","departmentAndCourseAndSection": "CHEM 221 01","freeSeats": "3","main": True,"message": None,"prm": "LBSC NMLG NSMC ","professor": "Smith, Brian J.","resSeats": "","roomMet": "RCHM 116","sectionNum": "01","timesMet": "MWF 10:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "19696","course": "221P","courseName": "Workshop for CHEM 221","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221P","departmentAndCourseAndSection": "CHEM 221P 01","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "","professor": "Smith, Brian J.","resSeats": "","roomMet": "OBSV 105","sectionNum": "01","timesMet": "M 12:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "20009","course": "221P","courseName": "Workshop for CHEM 221","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221P","departmentAndCourseAndSection": "CHEM 221P 02","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "","professor": "Smith, Brian J.","resSeats": "","roomMet": "OBSV 105","sectionNum": "02","timesMet": "M 2:00-3:52pm","waitList": ""},{"CCC": "Desc","CRN": "19697","course": "221P","courseName": "Workshop for CHEM 221","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221P","departmentAndCourseAndSection": "CHEM 221P 03","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "","professor": "Rovnyak, David S.","resSeats": "","roomMet": "ACWS 215","sectionNum": "03","timesMet": "T 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10021","course": "221L","courseName": "Lab for Inorganic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221L","departmentAndCourseAndSection": "CHEM 221L 60","dependent_main_sections": ["01"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Merriett, Erica","resSeats": "","roomMet": "RCHM 335","sectionNum": "60","timesMet": "W 1:00-2:52pm","waitList": ""},{"CCC": "Desc","CRN": "10022","course": "221L","courseName": "Lab for Inorganic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221L","departmentAndCourseAndSection": "CHEM 221L 61","dependent_main_sections": ["01"],"freeSeats": "3","main": False,"message": None,"prm": "NSMC ","professor": "Merriett, Erica","resSeats": "","roomMet": "RCHM 335","sectionNum": "61","timesMet": "W 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "20010","course": "221L","courseName": "Lab for Inorganic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221L","departmentAndCourseAndSection": "CHEM 221L 62","dependent_main_sections": ["01"],"freeSeats": "7","main": False,"message": None,"prm": "NSMC ","professor": "Merriett, Erica","resSeats": "","roomMet": "RCHM 335","sectionNum": "62","timesMet": "R 1:00-2:52pm","waitList": ""},{"CCC": "Desc","CRN": "20011","course": "221L","courseName": "Lab for Inorganic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 221","departmentAndCourse": "CHEM 221L","departmentAndCourseAndSection": "CHEM 221L 63","dependent_main_sections": ["01"],"freeSeats": "7","main": False,"message": None,"prm": "NSMC ","professor": "Merriett, Erica","resSeats": "","roomMet": "RCHM 335","sectionNum": "63","timesMet": "R 3:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19546","course": "231","courseName": "Analytical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 231","departmentAndCourse": "CHEM 231","departmentAndCourseAndSection": "CHEM 231 01","freeSeats": "Closed","main": True,"message": None,"prm": "CCQR NMLG NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "","roomMet": "BRKI 066","sectionNum": "01","timesMet": "TR 9:30-10:52am","waitList": ""},{"CCC": "Desc","CRN": "19592","course": "231R","courseName": "Recitation-Analytical Chemisty","department": "CHEM","departmentAndBareCourse": "CHEM 231","departmentAndCourse": "CHEM 231R","departmentAndCourseAndSection": "CHEM 231R 40","dependent_main_sections": ["01"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "","roomMet": "DANA 116","sectionNum": "40","timesMet": "F 1:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "19676","course": "231R","courseName": "Recitation-Analytical Chemisty","department": "CHEM","departmentAndBareCourse": "CHEM 231","departmentAndCourse": "CHEM 231R","departmentAndCourseAndSection": "CHEM 231R 41","dependent_main_sections": ["01"],"freeSeats": "13","main": False,"message": None,"prm": "NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "","roomMet": "DANA 116","sectionNum": "41","timesMet": "F 2:00-2:52pm","waitList": ""},{"CCC": "Desc","CRN": "19547","course": "231L","courseName": "Lab for Analytical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 231","departmentAndCourse": "CHEM 231L","departmentAndCourseAndSection": "CHEM 231L 60","dependent_main_sections": ["01"],"freeSeats": "13","main": False,"message": None,"prm": "NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "","roomMet": "RCHM 101, RCHM 226","sectionNum": "60","timesMet": "W 1:00-1:52pmW 2:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19548","course": "231L","courseName": "Lab for Analytical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 231","departmentAndCourse": "CHEM 231L","departmentAndCourseAndSection": "CHEM 231L 61","dependent_main_sections": ["01"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "","roomMet": "RCHM 102, RCHM 226","sectionNum": "61","timesMet": "R 1:00-1:52pmR 2:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19951","course": "313","courseName": "Synthetic Organic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 313","departmentAndCourse": "CHEM 313","departmentAndCourseAndSection": "CHEM 313 01","freeSeats": "5","main": True,"message": "Section CHEM 313 01: Must select the recitation","prm": "NSMC ","professor": "Casteel, Dee A.","resSeats": "","roomMet": "BIOL 324","sectionNum": "01","timesMet": "TR 8:00-9:22am","waitList": ""},{"CCC": "Desc","CRN": "19979","course": "313R","courseName": "Recitation-Synthetic Orgn Chem","department": "CHEM","departmentAndBareCourse": "CHEM 313","departmentAndCourse": "CHEM 313R","departmentAndCourseAndSection": "CHEM 313R 40","dependent_main_sections": ["01"],"freeSeats": "5","main": False,"message": None,"prm": "","professor": "Casteel, Dee A.","resSeats": "","roomMet": "","sectionNum": "40","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "18411","course": "332","courseName": "Analytical Chemistry II","department": "CHEM","departmentAndBareCourse": "CHEM 332","departmentAndCourse": "CHEM 332","departmentAndCourseAndSection": "CHEM 332 01","freeSeats": "5","main": True,"message": None,"prm": "NSMC W2 ","professor": "Strein, Timothy G.","resSeats": "","roomMet": "RCHM 102","sectionNum": "01","timesMet": "MWF 9:00-9:52am","waitList": ""},{"CCC": "Desc","CRN": "18441","course": "332L","courseName": "Lab-Analytical Chemistry II","department": "CHEM","departmentAndBareCourse": "CHEM 332","departmentAndCourse": "CHEM 332L","departmentAndCourseAndSection": "CHEM 332L 60","dependent_main_sections": ["01"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Strein, Timothy G.","resSeats": "","roomMet": "RCHM 232","sectionNum": "60","timesMet": "T 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "18605","course": "332L","courseName": "Lab-Analytical Chemistry II","department": "CHEM","departmentAndBareCourse": "CHEM 332","departmentAndCourse": "CHEM 332L","departmentAndCourseAndSection": "CHEM 332L 61","dependent_main_sections": ["01"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Strein, Timothy G.","resSeats": "","roomMet": "RCHM 232","sectionNum": "61","timesMet": "R 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19552","course": "340","courseName": "Biological Physical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 340","departmentAndCourse": "CHEM 340","departmentAndCourseAndSection": "CHEM 340 01","freeSeats": "2","main": True,"message": None,"prm": "NSMC ","professor": "Rovnyak, David S.","resSeats": "","roomMet": "TAYL 208","sectionNum": "01","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "19593","course": "340R","courseName": "Rec-Biological Physical Chem","department": "CHEM","departmentAndBareCourse": "CHEM 340","departmentAndCourse": "CHEM 340R","departmentAndCourseAndSection": "CHEM 340R 40","dependent_main_sections": ["01"],"freeSeats": "2","main": False,"message": None,"prm": "NSMC ","professor": "Rovnyak, David S.","resSeats": "","roomMet": "","sectionNum": "40","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19553","course": "340L","courseName": "Lab-Biological Physical Chem","department": "CHEM","departmentAndBareCourse": "CHEM 340","departmentAndCourse": "CHEM 340L","departmentAndCourseAndSection": "CHEM 340L 60","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Rovnyak, David S.","resSeats": "","roomMet": "RCHM 323","sectionNum": "60","timesMet": "W 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "19554","course": "340L","courseName": "Lab-Biological Physical Chem","department": "CHEM","departmentAndBareCourse": "CHEM 340","departmentAndCourse": "CHEM 340L","departmentAndCourseAndSection": "CHEM 340L 61","dependent_main_sections": ["01"],"freeSeats": "5","main": False,"message": None,"prm": "NSMC ","professor": "Rovnyak, David S.","resSeats": "","roomMet": "RCHM 323","sectionNum": "61","timesMet": "F 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10028","course": "341","courseName": "Physical Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 341","departmentAndCourse": "CHEM 341","departmentAndCourseAndSection": "CHEM 341 01","freeSeats": "7","main": True,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.","resSeats": "","roomMet": "BIOL 221","sectionNum": "01","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "13295","course": "341R","courseName": "Recitation for CHEM 341","department": "CHEM","departmentAndBareCourse": "CHEM 341","departmentAndCourse": "CHEM 341R","departmentAndCourseAndSection": "CHEM 341R 40","dependent_main_sections": ["01"],"freeSeats": "7","main": False,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.","resSeats": "","roomMet": "BIOL 104","sectionNum": "40","timesMet": "W 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10030","course": "341L","courseName": "Lab for Physical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 341","departmentAndCourse": "CHEM 341L","departmentAndCourseAndSection": "CHEM 341L 60","dependent_main_sections": ["01"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.","resSeats": "","roomMet": "RCHM 323","sectionNum": "60","timesMet": "M 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10031","course": "341L","courseName": "Lab for Physical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 341","departmentAndCourse": "CHEM 341L","departmentAndCourseAndSection": "CHEM 341L 61","dependent_main_sections": ["01"],"freeSeats": "3","main": False,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.","resSeats": "","roomMet": "RCHM 323","sectionNum": "61","timesMet": "T 1:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "13292","course": "343","courseName": "Physical Chem for Engineers","department": "CHEM","departmentAndBareCourse": "CHEM 343","departmentAndCourse": "CHEM 343","departmentAndCourseAndSection": "CHEM 343 01","freeSeats": "8","main": True,"message": "Section CHEM 343 01: Only open to students in the College of Engineering.","prm": "NSMC ","professor": "Jimenez, Zulma A.","resSeats": "","roomMet": "DANA 134","sectionNum": "01","timesMet": "TR 9:30-10:52am","waitList": ""},{"CCC": "Desc","CRN": "13300","course": "343R","courseName": "Recitation for CHEM 343","department": "CHEM","departmentAndBareCourse": "CHEM 343","departmentAndCourse": "CHEM 343R","departmentAndCourseAndSection": "CHEM 343R 40","dependent_main_sections": ["01"],"freeSeats": "8","main": False,"message": None,"prm": "NSMC ","professor": "Jimenez, Zulma A.","resSeats": "","roomMet": "RCHM 102","sectionNum": "40","timesMet": "T 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10032","course": "351","courseName": "Biochemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351","departmentAndCourseAndSection": "CHEM 351 01","freeSeats": "Closed","main": True,"message": "Section CHEM 351 01: Recitation 40 or 41 must be selected with CHEM 351-01.","prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "DANA 113","sectionNum": "01","timesMet": "MWF 10:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "17496","course": "351","courseName": "Biochemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351","departmentAndCourseAndSection": "CHEM 351 02","freeSeats": "4","main": True,"message": "Section CHEM 351 02: Recitation 42 or 43 must be selected with CHEM 351-02.","prm": "NSMC ","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "RCHM 116","sectionNum": "02","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10042","course": "351R","courseName": "Recitation for CHEM 351-01","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351R","departmentAndCourseAndSection": "CHEM 351R 40","dependent_main_sections": ["01"],"freeSeats": "1","main": False,"message": None,"prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 018","sectionNum": "40","timesMet": "W 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10043","course": "351R","courseName": "Recitation for CHEM 351-01","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351R","departmentAndCourseAndSection": "CHEM 351R 41","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 101","sectionNum": "41","timesMet": "R 1:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "17497","course": "351R","courseName": "Recitation for CHEM 351-02","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351R","departmentAndCourseAndSection": "CHEM 351R 42","dependent_main_sections": ["02"],"freeSeats": "4","main": False,"message": None,"prm": "NSMC ","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "RCHM 101","sectionNum": "42","timesMet": "M 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "17498","course": "351R","courseName": "Recitation for CHEM 351-02","department": "CHEM","departmentAndBareCourse": "CHEM 351","departmentAndCourse": "CHEM 351R","departmentAndCourseAndSection": "CHEM 351R 43","dependent_main_sections": ["02"],"freeSeats": "Closed","main": False,"message": None,"prm": "NSMC ","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "BIOL 104","sectionNum": "43","timesMet": "T 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "19555","course": "360","courseName": "Advncd Environmental Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 360","departmentAndCourse": "CHEM 360","departmentAndCourseAndSection": "CHEM 360 01","freeSeats": "15","main": True,"message": None,"prm": "EVCN NSMC ","professor": "McGuire, Molly M.","resSeats": "","roomMet": "RCHM 101","sectionNum": "01","timesMet": "TR 9:30-10:52am","waitList": ""},{"CCC": "Desc","CRN": "16902","course": "371","courseName": "Chemistry Lecture Series","department": "CHEM","departmentAndBareCourse": "CHEM 371","departmentAndCourse": "CHEM 371","departmentAndCourseAndSection": "CHEM 371 01","freeSeats": "5","main": True,"message": None,"prm": "NSMC ","professor": "Krout, Michael R.","resSeats": "","roomMet": "RCHM 101","sectionNum": "01","timesMet": "W 12:00-12:52pm","waitList": ""},{"CCC": "Desc","CRN": "14549","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 01","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Casteel, Dee A.","resSeats": "Prm","roomMet": "","sectionNum": "01","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14589","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 02","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Stockland, Robert A.","resSeats": "Prm","roomMet": "","sectionNum": "02","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14598","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 03","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Clapp, Charles H.","resSeats": "Prm","roomMet": "","sectionNum": "03","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14627","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 04","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Kerber, William (Will) D.","resSeats": "Prm","roomMet": "","sectionNum": "04","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14678","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 05","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Switzer, Rebecca L.","resSeats": "Prm","roomMet": "","sectionNum": "05","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "17343","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 06","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Krout, Michael R.","resSeats": "Prm","roomMet": "","sectionNum": "06","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14686","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 07","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Castle, Karen J.","resSeats": "Prm","roomMet": "","sectionNum": "07","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14703","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 08","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Strein, Timothy G.","resSeats": "Prm","roomMet": "","sectionNum": "08","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14969","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 10","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "McGuire, Molly M.","resSeats": "Prm","roomMet": "","sectionNum": "10","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14971","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 11","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Rovnyak, David S.","resSeats": "Prm","roomMet": "","sectionNum": "11","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14972","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 12","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Dutcher, Dabrina D.","resSeats": "Prm","roomMet": "","sectionNum": "12","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14974","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 13","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Swan, James S.","resSeats": "Prm","roomMet": "","sectionNum": "13","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14976","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 14","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Williams, Brian W.","resSeats": "Prm","roomMet": "","sectionNum": "14","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19177","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 15","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Smith, Brian J.","resSeats": "Prm","roomMet": "","sectionNum": "15","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19197","course": "375","courseName": "Undergraduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 375","departmentAndCourse": "CHEM 375","departmentAndCourseAndSection": "CHEM 375 16","freeSeats": " ","main": True,"message": None,"prm": "NSMC ","professor": "Arslan, Hasan","resSeats": "Prm","roomMet": "","sectionNum": "16","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "15024","course": "385","courseName": "Polymer Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 385","departmentAndCourse": "CHEM 385","departmentAndCourseAndSection": "CHEM 385 01","freeSeats": "2","main": True,"message": None,"prm": "NSMC ","professor": "Arslan, Hasan","resSeats": "","roomMet": "RCHM 102","sectionNum": "01","timesMet": "W 7:00-9:52pm","waitList": ""},{"CCC": "Desc","CRN": "19952","course": "613","courseName": "Synthetic Organic Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 613","departmentAndCourse": "CHEM 613","departmentAndCourseAndSection": "CHEM 613 01","freeSeats": "5","main": True,"message": None,"prm": "","professor": "Casteel, Dee A.","resSeats": "Prm","roomMet": "BIOL 324","sectionNum": "01","timesMet": "TR 8:00-9:22am","waitList": ""},{"CCC": "Desc","CRN": "10027","course": "632","courseName": "Analytical Chemistry II","department": "CHEM","departmentAndBareCourse": "CHEM 632","departmentAndCourse": "CHEM 632","departmentAndCourseAndSection": "CHEM 632 01","freeSeats": "5","main": True,"message": None,"prm": "","professor": "Strein, Timothy G.","resSeats": "","roomMet": "RCHM 102","sectionNum": "01","timesMet": "MWF 9:00-9:52am","waitList": ""},{"CCC": "Desc","CRN": "19675","course": "640","courseName": "Biological Physical Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 640","departmentAndCourse": "CHEM 640","departmentAndCourseAndSection": "CHEM 640 01","freeSeats": "2","main": True,"message": None,"prm": "","professor": "Rovnyak, David S.","resSeats": "","roomMet": "TAYL 208","sectionNum": "01","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10029","course": "641","courseName": "Physical Chemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 641","departmentAndCourse": "CHEM 641","departmentAndCourseAndSection": "CHEM 641 01","freeSeats": "5","main": True,"message": "Section CHEM 641 01: Not open to Chemical or Biomedical engineering students.","prm": "","professor": "Williams, Brian W.","resSeats": "","roomMet": "BIOL 221","sectionNum": "01","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "13297","course": "641R","courseName": "Recitation for CHEM 641","department": "CHEM","departmentAndBareCourse": "CHEM 641","departmentAndCourse": "CHEM 641R","departmentAndCourseAndSection": "CHEM 641R 40","dependent_main_sections": ["01"],"freeSeats": "5","main": False,"message": None,"prm": "","professor": "Williams, Brian W.","resSeats": "","roomMet": "BIOL 104","sectionNum": "40","timesMet": "W 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10033","course": "651","courseName": "Biochemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651","departmentAndCourseAndSection": "CHEM 651 01","freeSeats": "5","main": True,"message": "Section CHEM 651 01: Recitation 40 or 41 must be selected with CHEM 651-01.","prm": "","professor": "Clapp, Charles H.","resSeats": "","roomMet": "DANA 113","sectionNum": "01","timesMet": "MWF 10:00-10:52am","waitList": ""},{"CCC": "Desc","CRN": "17801","course": "651","courseName": "Biochemistry I","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651","departmentAndCourseAndSection": "CHEM 651 02","freeSeats": "13","main": True,"message": "Section CHEM 651 02: Recitation 42 or 43 must be selected with CHEM 351-02.","prm": "","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "RCHM 116","sectionNum": "02","timesMet": "MWF 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "10044","course": "651R","courseName": "Recitation for CHEM 651-01","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651R","departmentAndCourseAndSection": "CHEM 651R 40","dependent_main_sections": ["01"],"freeSeats": "5","main": False,"message": None,"prm": "","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 018","sectionNum": "40","timesMet": "W 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "10045","course": "651R","courseName": "Recitation for CHEM 651-01","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651R","departmentAndCourseAndSection": "CHEM 651R 41","dependent_main_sections": ["01"],"freeSeats": "Closed","main": False,"message": None,"prm": "","professor": "Clapp, Charles H.","resSeats": "","roomMet": "RCHM 101","sectionNum": "41","timesMet": "R 1:00-1:52pm","waitList": ""},{"CCC": "Desc","CRN": "17802","course": "651R","courseName": "Recitation for CHEM 651-02","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651R","departmentAndCourseAndSection": "CHEM 651R 42","dependent_main_sections": ["02"],"freeSeats": "3","main": False,"message": None,"prm": "","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "RCHM 101","sectionNum": "42","timesMet": "M 4:00-4:52pm","waitList": ""},{"CCC": "Desc","CRN": "17803","course": "651R","courseName": "Recitation for CHEM 651-02","department": "CHEM","departmentAndBareCourse": "CHEM 651","departmentAndCourse": "CHEM 651R","departmentAndCourseAndSection": "CHEM 651R 43","dependent_main_sections": ["02"],"freeSeats": "4","main": False,"message": None,"prm": "","professor": "Switzer, Rebecca L.","resSeats": "","roomMet": "BIOL 104","sectionNum": "43","timesMet": "T 11:00-11:52am","waitList": ""},{"CCC": "Desc","CRN": "19684","course": "660","courseName": "Adv Environmental Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 660","departmentAndCourse": "CHEM 660","departmentAndCourseAndSection": "CHEM 660 01","freeSeats": "6","main": True,"message": None,"prm": "","professor": "McGuire, Molly M.","resSeats": "","roomMet": "RCHM 101","sectionNum": "01","timesMet": "TR 9:30-10:52am","waitList": ""},{"CCC": "Desc","CRN": "14651","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 01","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Casteel, Dee A.","resSeats": "Prm","roomMet": "","sectionNum": "01","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19198","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 02","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Stockland, Robert A.","resSeats": "Prm","roomMet": "","sectionNum": "02","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14687","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 03","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Clapp, Charles H.","resSeats": "Prm","roomMet": "","sectionNum": "03","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14691","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 04","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Kerber, William (Will) D.","resSeats": "Prm","roomMet": "","sectionNum": "04","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14977","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 05","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Switzer, Rebecca L.","resSeats": "Prm","roomMet": "","sectionNum": "05","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14979","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 06","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Krout, Michael R.","resSeats": "Prm","roomMet": "","sectionNum": "06","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14981","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 08","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Strein, Timothy G.","resSeats": "Prm","roomMet": "","sectionNum": "08","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14982","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 09","freeSeats": " ","main": True,"message": None,"prm": "","professor": "STAFF","resSeats": "Prm","roomMet": "","sectionNum": "09","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14983","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 10","freeSeats": " ","main": True,"message": None,"prm": "","professor": "McGuire, Molly M.","resSeats": "Prm","roomMet": "","sectionNum": "10","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14984","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 11","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Rovnyak, David S.","resSeats": "Prm","roomMet": "","sectionNum": "11","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14985","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 12","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Dutcher, Dabrina D.","resSeats": "Prm","roomMet": "","sectionNum": "12","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14992","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 13","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Swan, James S.","resSeats": "Prm","roomMet": "","sectionNum": "13","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "14996","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 14","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Williams, Brian W.","resSeats": "Prm","roomMet": "","sectionNum": "14","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19556","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 15","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Smith, Brian J.","resSeats": "Prm","roomMet": "","sectionNum": "15","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "19557","course": "675","courseName": "Graduate Research","department": "CHEM","departmentAndBareCourse": "CHEM 675","departmentAndCourse": "CHEM 675","departmentAndCourseAndSection": "CHEM 675 16","freeSeats": " ","main": True,"message": None,"prm": "","professor": "Arslan, Hasan","resSeats": "Prm","roomMet": "","sectionNum": "16","timesMet": " TBA","waitList": ""},{"CCC": "Desc","CRN": "15027","course": "685","courseName": "Polymer Chemistry","department": "CHEM","departmentAndBareCourse": "CHEM 685","departmentAndCourse": "CHEM 685","departmentAndCourseAndSection": "CHEM 685 01","freeSeats": "4","main": True,"message": None,"prm": "","professor": "Arslan, Hasan","resSeats": "","roomMet": "RCHM 102","sectionNum": "01","timesMet": "W 7:00-9:52pm","waitList": ""},{"CCC": "Desc","CRN": "19329","course": "098","courseName": "How We Know","department": "FOUN","departmentAndBareCourse": "FOUN 098","departmentAndCourse": "FOUN 098","departmentAndCourseAndSection": "FOUN 098 53","freeSeats": "Closed","main": True,"message": None,"prm": "FOUN FRST W1 ","professor": "Williams, Brian W.","resSeats": "","roomMet": "TAYL 210","sectionNum": "53","timesMet": "TR 9:30-10:52am","waitList": ""}])

	# return metadata if no parameters are provided
	if department is None and course_number is None:
		return jsonify(departments=DEPARTMENT_LIST)

	# TODO - validate department against metadata
	department = department.upper()

	cache_time, department_data = Department.process_department_request(department)

	# return all courses in department
	if course_number is None:
		return jsonify(sections=department_data, cache_time=cache_time)

	# return data on specified course
	else:
		sections = find_course_in_department(department_data, department, course_number)
		return jsonify(sections=sections, cache_time=cache_time)


@app.route('/category')
@app.route('/category/<category>')
@app.route('/category/<category>/<lookup_val>')
def other_lookup(category=None, lookup_val=None):

	# provide category options if a category is not specified
	if category is None:
		return jsonify(category=['ccc','credit'])

	category = category.lower()

	# provide metadata if lookup value is not specified
	if category == 'ccc' and lookup_val is None:
		return jsonify(ccc=CCC_LIST)

	elif category == 'credit' and lookup_val is None:
		return jsonify(credit=CREDIT_LIST)

	# provide course data
	elif category in ['ccc', 'credit'] and lookup_val is not None:
		# TODO - validate lookup_val against metadata
		lookup_val = lookup_val.upper()
		cache_time, all_sections = CreditOrCCC.process_ccc_or_credit_request(category, lookup_val)
		return jsonify(sections=all_sections, cache_time=cache_time)

	# invalid lookup type
	else:
		return jsonify(error="Category should be either 'ccc' or 'credit'"), httplib.BAD_REQUEST


@app.route('/sectiondetails/')
@handle_response_errors(['crn', 'department'])
def get_details(crn, department):
	cache_time, section_details = fetch_section_details(crn, department)
	return jsonify(section_details=section_details, cache_time=cache_time)


@app.route('/storeConfig/')
@handle_response_errors(['config'])
def store_course_configuration(config):
	link = generate_short_link()
	store_link(link, config)
	return jsonify(shortLink=link)


@app.route('/reportError/')
@handle_response_errors(['errorDescription', 'name', 'email', 'useragent', 'schedule'])
def report_error(error_description, name, email, useragent, schedule):
	ip = request.remote_addr

	payload = {
		'error_description': error_description,
		'name': name,
		'email': email,
		'useragent': useragent,
		'ip': ip,
		'schedule': schedule,
		'form_api_token': SIMPLE_FORM_TOKEN
	}

	requests.post("http://getsimpleform.com/messages", data=payload)
	return '', httplib.NO_CONTENT


@app.errorhandler(httplib.NOT_FOUND)
def page_not_found(error):
	return render_template('404.html', APP_ROOT=APPLICATION_ROOT), httplib.NOT_FOUND
